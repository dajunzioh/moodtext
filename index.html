<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>恋爱占有欲测评</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #0a0a14;
            color: #f0e6ff;
            line-height: 1.6;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(106, 17, 203, 0.15) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(157, 78, 221, 0.1) 0%, transparent 20%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(74, 0, 144, 0.9) 0%, rgba(11, 0, 36, 0.9) 100%);
            color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(106, 17, 203, 0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(157, 78, 221, 0.3);
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M50,0 C22.4,0 0,22.4 0,50 C0,77.6 22.4,100 50,100 C77.6,100 100,77.6 100,50 C100,22.4 77.6,0 50,0 Z" fill="none" stroke="rgba(157, 78, 221, 0.2)" stroke-width="1"/></svg>');
            opacity: 0.6;
        }
        
        h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            position: relative;
            background: linear-gradient(90deg, #d8b4fe, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(157, 78, 221, 0.5);
        }
        
        .tagline {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            color: #cbb6ff;
        }
        
        .card {
            background: rgba(20, 10, 40, 0.8);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 35px;
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(157, 78, 221, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(106, 17, 203, 0.4);
            border-color: rgba(157, 78, 221, 0.4);
        }
        
        h2 {
            color: #c084fc;
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 2px solid rgba(157, 78, 221, 0.3);
            padding-bottom: 15px;
        }
        
        h2 i {
            color: #c084fc;
            font-size: 1.8rem;
        }
        
        .dimensions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .dimension {
            background: linear-gradient(145deg, rgba(40, 20, 70, 0.8), rgba(20, 10, 40, 0.9));
            border-radius: 15px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 1px solid rgba(157, 78, 221, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .dimension::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
        }
        
        .dimension:nth-child(1)::before {
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }
        
        .dimension:nth-child(2)::before {
            background: linear-gradient(90deg, #4ecdc4, #6efaf1);
        }
        
        .dimension:nth-child(3)::before {
            background: linear-gradient(90deg, #ffd166, #ffde8a);
        }
        
        .dimension:nth-child(4)::before {
            background: linear-gradient(90deg, #9d4edd, #c084fc);
        }
        
        .dimension:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(157, 78, 221, 0.4);
        }
        
        .dimension h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #f0e6ff;
        }
        
        .dimension p {
            color: #cbb6ff;
            font-size: 0.95rem;
        }
        
        .dimension-icon {
            font-size: 2.8rem;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.2);
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin: 0 auto 20px;
            border: 2px solid;
        }
        
        .dimension:nth-child(1) .dimension-icon {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }
        
        .dimension:nth-child(2) .dimension-icon {
            border-color: #4ecdc4;
            color: #4ecdc4;
        }
        
        .dimension:nth-child(3) .dimension-icon {
            border-color: #ffd166;
            color: #ffd166;
        }
        
        .dimension:nth-child(4) .dimension-icon {
            border-color: #9d4edd;
            color: #9d4edd;
        }
        
        .question {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .question:last-child {
            border-bottom: none;
        }
        
        .question-text {
            font-size: 1.25rem;
            margin-bottom: 25px;
            color: #f0e6ff;
            font-weight: 500;
            line-height: 1.5;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
        }
        
        .option {
            background: rgba(40, 20, 70, 0.5);
            border: 2px solid rgba(157, 78, 221, 0.3);
            border-radius: 12px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option:hover {
            background: rgba(60, 30, 100, 0.7);
            border-color: #9d4edd;
            transform: translateY(-3px);
        }
        
        .option.selected {
            background: rgba(74, 0, 144, 0.4);
            border-color: #c084fc;
            box-shadow: 0 5px 15px rgba(157, 78, 221, 0.3);
        }
        
        .option input {
            display: none;
        }
        
        .option-label {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: 2px solid #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }
        
        .selected .option-label {
            background-color: #c084fc;
            border-color: #c084fc;
        }
        
        .selected .option-label::after {
            content: "";
            width: 12px;
            height: 12px;
            background-color: #0a0a14;
            border-radius: 50%;
        }
        
        .option-text {
            font-size: 1.05rem;
            color: #e2d9ff;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
        }
        
        button {
            padding: 18px 45px;
            font-size: 1.1rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        #submitBtn {
            background: linear-gradient(135deg, #7c3aed, #9d4edd);
            color: white;
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.4);
        }
        
        #submitBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.6);
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }
        
        #resetBtn {
            background: rgba(40, 20, 70, 0.8);
            color: #d8b4fe;
            border: 2px solid rgba(157, 78, 221, 0.5);
        }
        
        #resetBtn:hover {
            background: rgba(60, 30, 100, 0.9);
            transform: translateY(-3px);
            border-color: #c084fc;
        }
        
        .results {
            display: none;
        }
        
        .overall-result {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(74, 0, 144, 0.6), rgba(11, 0, 36, 0.8));
            border-radius: 20px;
            border: 1px solid rgba(157, 78, 221, 0.3);
        }
        
        .overall-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #c084fc;
        }
        
        .overall-score {
            font-size: 4.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, #d8b4fe, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(157, 78, 221, 0.5);
        }
        
        .overall-level {
            display: inline-block;
            padding: 10px 30px;
            border-radius: 30px;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .overall-analysis {
            font-size: 1.1rem;
            color: #e2d9ff;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }
        
        .score-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        .score-item {
            background: linear-gradient(145deg, rgba(40, 20, 70, 0.8), rgba(20, 10, 40, 0.9));
            border-radius: 15px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .score-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
        }
        
        .score-item:nth-child(1)::before {
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }
        
        .score-item:nth-child(2)::before {
            background: linear-gradient(90deg, #4ecdc4, #6efaf1);
        }
        
        .score-item:nth-child(3)::before {
            background: linear-gradient(90deg, #ffd166, #ffde8a);
        }
        
        .score-item:nth-child(4)::before {
            background: linear-gradient(90deg, #9d4edd, #c084fc);
        }
        
        .score-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #f0e6ff;
        }
        
        .score-bar {
            height: 20px;
            background-color: rgba(40, 20, 70, 0.8);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .score-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1.5s ease-in-out;
        }
        
        .score-item:nth-child(1) .score-fill {
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }
        
        .score-item:nth-child(2) .score-fill {
            background: linear-gradient(90deg, #4ecdc4, #6efaf1);
        }
        
        .score-item:nth-child(3) .score-fill {
            background: linear-gradient(90deg, #ffd166, #ffde8a);
        }
        
        .score-item:nth-child(4) .score-fill {
            background: linear-gradient(90deg, #9d4edd, #c084fc);
        }
        
        .score-value {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .score-item:nth-child(1) .score-value {
            color: #ff8e8e;
        }
        
        .score-item:nth-child(2) .score-value {
            color: #6efaf1;
        }
        
        .score-item:nth-child(3) .score-value {
            color: #ffde8a;
        }
        
        .score-item:nth-child(4) .score-value {
            color: #c084fc;
        }
        
        .analysis-section {
            margin-top: 40px;
        }
        
        .analysis-item {
            background: rgba(20, 10, 40, 0.7);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            border-left: 5px solid;
            transition: transform 0.3s ease;
        }
        
        .analysis-item:hover {
            transform: translateY(-5px);
            background: rgba(30, 15, 60, 0.8);
        }
        
        .analysis-item:nth-child(1) {
            border-left-color: #ff6b6b;
        }
        
        .analysis-item:nth-child(2) {
            border-left-color: #4ecdc4;
        }
        
        .analysis-item:nth-child(3) {
            border-left-color: #ffd166;
        }
        
        .analysis-item:nth-child(4) {
            border-left-color: #9d4edd;
        }
        
        .analysis-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #f0e6ff;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .analysis-content {
            color: #d8c7ff;
            line-height: 1.7;
        }
        
        .analysis-content p {
            margin-bottom: 15px;
        }
        
        .level-indicator {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .low {
            background: rgba(72, 187, 120, 0.2);
            color: #48bb78;
            border: 1px solid rgba(72, 187, 120, 0.4);
        }
        
        .medium {
            background: rgba(246, 173, 85, 0.2);
            color: #f6ad55;
            border: 1px solid rgba(246, 173, 85, 0.4);
        }
        
        .high {
            background: rgba(245, 101, 101, 0.2);
            color: #f56565;
            border: 1px solid rgba(245, 101, 101, 0.4);
        }
        
        .footer-note {
            text-align: center;
            margin-top: 50px;
            color: #a78bfa;
            font-size: 1rem;
            padding: 20px;
            border-top: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .progress {
            margin-bottom: 30px;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: #cbb6ff;
        }
        
        .progress-bar {
            height: 12px;
            background-color: rgba(40, 20, 70, 0.8);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7c3aed, #9d4edd);
            border-radius: 6px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        @media (max-width: 768px) {
            .dimensions, .score-display {
                grid-template-columns: 1fr;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .overall-score {
                font-size: 3.5rem;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-heart"></i> 恋爱占有欲测评</h1>
            <p class="tagline">深入探索您在恋爱关系中的占有欲倾向，了解自己的控制欲望、嫉妒强度、情感依赖和关系不安全感</p>
        </header>
        
        <div class="dimensions">
            <div class="dimension">
                <div class="dimension-icon">
                    <i class="fas fa-grip-lines"></i>
                </div>
                <h3>控制欲望</h3>
                <p>想要掌控伴侣行为、社交和决定的倾向程度</p>
            </div>
            <div class="dimension">
                <div class="dimension-icon">
                    <i class="fas fa-eye"></i>
                </div>
                <h3>嫉妒强度</h3>
                <p>对潜在竞争者或伴侣与他人互动的嫉妒反应程度</p>
            </div>
            <div class="dimension">
                <div class="dimension-icon">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <h3>情感依赖</h3>
                <p>在情感上依赖伴侣的程度和自我独立性的水平</p>
            </div>
            <div class="dimension">
                <div class="dimension-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>关系不安全感</h3>
                <p>对关系稳定性和伴侣忠诚度的担忧和不安程度</p>
            </div>
        </div>
        
        <div class="card" id="testSection">
            <h2><i class="fas fa-question-circle"></i> 测评题目</h2>
            
            <div class="progress">
                <div class="progress-text">
                    <span>完成进度</span>
                    <span id="progressText">0/20</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div id="questionsContainer">
                <!-- 问题将通过JavaScript动态生成 -->
            </div>
            
            <div class="buttons">
                <button id="submitBtn">
                    <i class="fas fa-chart-bar"></i> 查看测评结果
                </button>
                <button id="resetBtn">
                    <i class="fas fa-redo"></i> 重新答题
                </button>
            </div>
        </div>
        
        <div class="card results" id="resultsSection">
            <h2><i class="fas fa-chart-pie"></i> 测评结果</h2>
            
            <div class="overall-result">
                <div class="overall-title">总体测评结果</div>
                <div class="overall-score" id="overallScore">0%</div>
                <div class="overall-level" id="overallLevel">低占有欲</div>
                <div class="overall-analysis" id="overallAnalysis">
                    您的总体占有欲处于较低水平，表明您在恋爱关系中能够保持较好的平衡，既能有适度的投入和关心，也能尊重伴侣的个人空间和独立性。
                </div>
            </div>
            
            <h2><i class="fas fa-chart-line"></i> 各维度得分</h2>
            <p style="margin-bottom: 30px; color: #cbb6ff;">以下是根据您的回答生成的四个维度详细测评结果，每个维度的得分范围为0-100%，得分越高表示在该维度的倾向越明显。</p>
            
            <div class="score-display">
                <div class="score-item">
                    <div class="score-title">控制欲望</div>
                    <div class="score-bar">
                        <div class="score-fill" id="controlScoreFill" style="width: 0%"></div>
                    </div>
                    <div class="score-value" id="controlScore">0%</div>
                </div>
                <div class="score-item">
                    <div class="score-title">嫉妒强度</div>
                    <div class="score-bar">
                        <div class="score-fill" id="jealousyScoreFill" style="width: 0%"></div>
                    </div>
                    <div class="score-value" id="jealousyScore">0%</div>
                </div>
                <div class="score-item">
                    <div class="score-title">情感依赖</div>
                    <div class="score-bar">
                        <div class="score-fill" id="dependencyScoreFill" style="width: 0%"></div>
                    </div>
                    <div class="score-value" id="dependencyScore">0%</div>
                </div>
                <div class="score-item">
                    <div class="score-title">关系不安全感</div>
                    <div class="score-bar">
                        <div class="score-fill" id="insecurityScoreFill" style="width: 0%"></div>
                    </div>
                    <div class="score-value" id="insecurityScore">0%</div>
                </div>
            </div>
            
            <div class="analysis-section">
                <h2><i class="fas fa-comment-dots"></i> 各维度分析</h2>
                
                <div class="analysis-item">
                    <h3 class="analysis-title"><i class="fas fa-grip-lines"></i> 控制欲望分析</h3>
                    <div class="level-indicator low" id="controlLevel">低水平</div>
                    <div class="analysis-content" id="controlAnalysis">
                        <p>控制欲望反映了您在恋爱关系中希望掌控伴侣行为、决策和社交活动的倾向。</p>
                        <p>您的控制欲望处于较低水平，表明您在关系中倾向于给予伴侣足够的个人空间和自主权，尊重对方的独立性和选择自由。这有助于建立平等、健康的伴侣关系。</p>
                    </div>
                </div>
                
                <div class="analysis-item">
                    <h3 class="analysis-title"><i class="fas fa-eye"></i> 嫉妒强度分析</h3>
                    <div class="level-indicator low" id="jealousyLevel">低水平</div>
                    <div class="analysis-content" id="jealousyAnalysis">
                        <p>嫉妒强度衡量了您对潜在竞争者或伴侣与他人互动的情绪反应程度。</p>
                        <p>您的嫉妒强度较低，表明您对伴侣的信任度较高，不容易因伴侣与他人的正常社交互动而产生强烈的嫉妒情绪。这有助于减少关系中的猜疑和冲突。</p>
                    </div>
                </div>
                
                <div class="analysis-item">
                    <h3 class="analysis-title"><i class="fas fa-hands-helping"></i> 情感依赖分析</h3>
                    <div class="level-indicator low" id="dependencyLevel">低水平</div>
                    <div class="analysis-content" id="dependencyAnalysis">
                        <p>情感依赖评估了您在情感上依赖伴侣的程度和自我独立性的水平。</p>
                        <p>您的情感依赖程度较低，表明您在保持亲密关系的同时，也能维持良好的自我独立性和个人生活。这种平衡有助于建立健康、相互支持而非相互束缚的伴侣关系。</p>
                    </div>
                </div>
                
                <div class="analysis-item">
                    <h3 class="analysis-title"><i class="fas fa-shield-alt"></i> 关系不安全感分析</h3>
                    <div class="level-indicator low" id="insecurityLevel">低水平</div>
                    <div class="analysis-content" id="insecurityAnalysis">
                        <p>关系不安全感反映了您对关系稳定性和伴侣忠诚度的担忧和不安程度。</p>
                        <p>您的关系不安全感较低，表明您对当前关系有较强的安全感和信心，不容易过度担忧关系破裂或伴侣不忠。这种安全感是维持长期稳定关系的重要基础。</p>
                    </div>
                </div>
            </div>
            
            <div class="buttons">
                <button id="retakeTestBtn">
                    <i class="fas fa-redo"></i> 重新测评
                </button>
                <button id="viewTestBtn">
                    <i class="fas fa-list-ol"></i> 查看题目
                </button>
            </div>
        </div>
        
        <div class="footer-note">
            <p><i class="fas fa-info-circle"></i> 本测评旨在帮助您了解自己在恋爱关系中的占有欲倾向，结果仅供参考，不能替代专业心理咨询。健康的恋爱关系建立在信任、尊重和沟通的基础上。</p>
        </div>
    </div>

    <script>
        // 测评问题和选项
        const questions = [
            // 控制欲望维度 (1-5题)
            {
                text: "当伴侣与异性朋友单独见面时，您会有什么感受？",
                dimension: "control",
                options: [
                    { text: "完全信任，不需要过问细节", score: 0 },
                    { text: "可以接受，但希望知道他们见面的原因", score: 25 },
                    { text: "有点不安，希望伴侣提前征求我的同意", score: 50 },
                    { text: "不太接受，会要求伴侣减少这类见面", score: 75 },
                    { text: "完全不能接受，会明确禁止这类行为", score: 100 }
                ]
            },
            {
                text: "您会查看伴侣的手机或社交账号吗？",
                dimension: "control",
                options: [
                    { text: "从不，尊重伴侣隐私", score: 0 },
                    { text: "偶尔，但会先征求伴侣同意", score: 25 },
                    { text: "有时会想查看，但会克制自己", score: 50 },
                    { text: "经常想查看，偶尔会付诸行动", score: 75 },
                    { text: "经常查看，认为这是了解伴侣的必要方式", score: 100 }
                ]
            },
            {
                text: "对于伴侣的穿着打扮，您的态度是？",
                dimension: "control",
                options: [
                    { text: "完全由伴侣自己决定，我不过问", score: 0 },
                    { text: "可以给建议，但最终由伴侣决定", score: 25 },
                    { text: "会表达偏好，希望伴侣考虑我的意见", score: 50 },
                    { text: "会明确表示不喜欢某些穿着，希望伴侣改变", score: 75 },
                    { text: "会直接要求伴侣按照我的喜好来打扮", score: 100 }
                ]
            },
            {
                text: "您希望了解伴侣每天的详细行程吗？",
                dimension: "control",
                options: [
                    { text: "不需要，伴侣有自己的生活和自由", score: 0 },
                    { text: "大概了解就好，不需要详细行程", score: 25 },
                    { text: "希望知道主要安排，但不是必须", score: 50 },
                    { text: "需要知道详细行程，这样我才放心", score: 75 },
                    { text: "必须随时报备行程，这是我的要求", score: 100 }
                ]
            },
            {
                text: "当伴侣做出重要决定时（如工作变动），您的态度是？",
                dimension: "control",
                options: [
                    { text: "完全由伴侣自己决定，我支持即可", score: 0 },
                    { text: "可以给建议，但决定权在伴侣", score: 25 },
                    { text: "希望参与讨论，共同做决定", score: 50 },
                    { text: "希望伴侣优先考虑我的意见", score: 75 },
                    { text: "必须由我做主或共同决定，不能单独决定", score: 100 }
                ]
            },
            // 嫉妒强度维度 (6-10题)
            {
                text: "看到伴侣与异性有说有笑，您的第一反应是？",
                dimension: "jealousy",
                options: [
                    { text: "很正常，社交的一部分", score: 0 },
                    { text: "有点在意，但不会表现出来", score: 25 },
                    { text: "会感到不安，之后会询问伴侣", score: 50 },
                    { text: "会明显表现出不快，要求解释", score: 75 },
                    { text: "会非常生气，当场制止或事后争吵", score: 100 }
                ]
            },
            {
                text: "伴侣提到过去的感情经历时，您的反应是？",
                dimension: "jealousy",
                options: [
                    { text: "平静倾听，视为了解伴侣的一部分", score: 0 },
                    { text: "有点好奇，但不会深究", score: 25 },
                    { text: "会感到些许嫉妒，不愿多听", score: 50 },
                    { text: "会明显感到不快，要求转换话题", score: 75 },
                    { text: "会非常嫉妒，禁止伴侣提起", score: 100 }
                ]
            },
            {
                text: "伴侣在社交媒体上给异性点赞或评论，您的感受是？",
                dimension: "jealousy",
                options: [
                    { text: "完全不在意，正常的社交互动", score: 0 },
                    { text: "稍有关注，但不会干预", score: 25 },
                    { text: "会有点介意，可能会询问", score: 50 },
                    { text: "会明确表示不喜欢这种行为", score: 75 },
                    { text: "绝对不能接受，要求伴侣停止", score: 100 }
                ]
            },
            {
                text: "伴侣与前任保持联系（如偶尔问候），您的态度是？",
                dimension: "jealousy",
                options: [
                    { text: "可以接受，只要适度", score: 0 },
                    { text: "不太舒服，但不会干涉", score: 25 },
                    { text: "会感到嫉妒，希望减少联系", score: 50 },
                    { text: "会明确反对，要求断绝联系", score: 75 },
                    { text: "完全不能接受，是原则问题", score: 100 }
                ]
            },
            {
                text: "当有异性明显对伴侣表示好感时，您会？",
                dimension: "jealousy",
                options: [
                    { text: "信任伴侣能处理好", score: 0 },
                    { text: "稍感威胁，但相信伴侣", score: 25 },
                    { text: "会感到嫉妒，要求伴侣明确拒绝", score: 50 },
                    { text: "会直接介入，警告那位异性", score: 75 },
                    { text: "会非常愤怒，可能引发与伴侣的冲突", score: 100 }
                ]
            },
            // 情感依赖维度 (11-15题)
            {
                text: "当您心情不好时，您有多依赖伴侣的安慰？",
                dimension: "dependency",
                options: [
                    { text: "主要自己调节，偶尔寻求安慰", score: 0 },
                    { text: "会向伴侣倾诉，但也能自我调节", score: 25 },
                    { text: "通常需要伴侣安慰才能好转", score: 50 },
                    { text: "非常依赖伴侣的安慰和支持", score: 75 },
                    { text: "完全依赖伴侣，自己无法调节情绪", score: 100 }
                ]
            },
            {
                text: "您能享受独自一人的时光吗？",
                dimension: "dependency",
                options: [
                    { text: "非常享受，有丰富的个人生活", score: 0 },
                    { text: "比较享受，但更喜欢与伴侣在一起", score: 25 },
                    { text: "可以独处，但时间长了会感到孤独", score: 50 },
                    { text: "不太喜欢独处，希望伴侣常陪伴", score: 75 },
                    { text: "非常不喜欢独处，需要伴侣时刻陪伴", score: 100 }
                ]
            },
            {
                text: "做决定时，您有多依赖伴侣的意见？",
                dimension: "dependency",
                options: [
                    { text: "通常自己做决定，偶尔咨询伴侣", score: 0 },
                    { text: "会考虑伴侣意见，但最终自己决定", score: 25 },
                    { text: "重要决定需要与伴侣商量", score: 50 },
                    { text: "大多数决定都需要伴侣参与", score: 75 },
                    { text: "几乎所有决定都依赖伴侣的意见", score: 100 }
                ]
            },
            {
                text: "当伴侣出差或旅行几天，您的感受是？",
                dimension: "dependency",
                options: [
                    { text: "完全没问题，享受个人空间", score: 0 },
                    { text: "稍有不习惯，但可以适应", score: 25 },
                    { text: "会感到想念，希望保持频繁联系", score: 50 },
                    { text: "会感到不安，希望伴侣尽快回来", score: 75 },
                    { text: "会非常焦虑，难以正常生活", score: 100 }
                ]
            },
            {
                text: "您的幸福感有多依赖恋爱关系？",
                dimension: "dependency",
                options: [
                    { text: "恋爱只是幸福的一部分来源", score: 0 },
                    { text: "恋爱是重要幸福来源，但非全部", score: 25 },
                    { text: "恋爱是主要的幸福来源", score: 50 },
                    { text: "幸福高度依赖恋爱关系", score: 75 },
                    { text: "幸福完全取决于恋爱关系", score: 100 }
                ]
            },
            // 关系不安全感维度 (16-20题)
            {
                text: "您是否经常担心伴侣会离开您？",
                dimension: "insecurity",
                options: [
                    { text: "从不担心，对关系有信心", score: 0 },
                    { text: "偶尔担心，但很快能打消念头", score: 25 },
                    { text: "有时会担心，需要伴侣 reassurance", score: 50 },
                    { text: "经常担心，会通过各种方式确认", score: 75 },
                    { text: "总是担心，甚至影响日常生活", score: 100 }
                ]
            },
            {
                text: "当伴侣没有及时回复消息时，您会？",
                dimension: "insecurity",
                options: [
                    { text: "理解对方可能忙，不会多想", score: 0 },
                    { text: "稍感不安，但会等待回复", score: 25 },
                    { text: "会担心，可能多发几条消息", score: 50 },
                    { text: "会焦虑，可能打电话确认", score: 75 },
                    { text: "会极度不安，怀疑对方有意回避", score: 100 }
                ]
            },
            {
                text: "您是否常需要通过测试来确认伴侣的爱？",
                dimension: "insecurity",
                options: [
                    { text: "从不，信任伴侣的爱", score: 0 },
                    { text: "偶尔，但主要是通过日常互动感受", score: 25 },
                    { text: "有时，需要一些明确表达", score: 50 },
                    { text: "经常，需要不断确认", score: 75 },
                    { text: "总是，否则会感到不安", score: 100 }
                ]
            },
            {
                text: "您是否经常将伴侣与他人比较？",
                dimension: "insecurity",
                options: [
                    { text: "从不比较，每段关系都是独特的", score: 0 },
                    { text: "偶尔比较，但不会影响关系", score: 25 },
                    { text: "有时比较，会担心自己不够好", score: 50 },
                    { text: "经常比较，会感到不安全", score: 75 },
                    { text: "总是比较，严重影响自信心", score: 100 }
                ]
            },
            {
                text: "您是否担心伴侣会遇到'更好'的人而离开？",
                dimension: "insecurity",
                options: [
                    { text: "完全不担心，相信我们的感情", score: 0 },
                    { text: "偶尔闪过念头，但不会深想", score: 25 },
                    { text: "有时担心，会努力提升自己", score: 50 },
                    { text: "经常担心，会限制伴侣社交", score: 75 },
                    { text: "总是担心，认为随时可能发生", score: 100 }
                ]
            }
        ];

        // 当前选择的答案
        let userAnswers = new Array(questions.length).fill(null);
        
        // 初始化测评
        function initTest() {
            const questionsContainer = document.getElementById('questionsContainer');
            questionsContainer.innerHTML = '';
            
            questions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                questionElement.innerHTML = `
                    <div class="question-text">${index + 1}. ${question.text}</div>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-question="${index}" data-option="${optIndex}">
                                <div class="option-label"></div>
                                <div class="option-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                questionsContainer.appendChild(questionElement);
            });
            
            // 添加选项点击事件
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = parseInt(this.getAttribute('data-question'));
                    const optionIndex = parseInt(this.getAttribute('data-option'));
                    
                    // 移除同一问题其他选项的选中状态
                    const questionOptions = document.querySelectorAll(`.option[data-question="${questionIndex}"]`);
                    questionOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // 选中当前选项
                    this.classList.add('selected');
                    
                    // 保存答案
                    userAnswers[questionIndex] = optionIndex;
                    
                    // 更新进度
                    updateProgress();
                });
            });
            
            // 更新进度
            updateProgress();
        }
        
        // 更新进度条
        function updateProgress() {
            const answeredCount = userAnswers.filter(answer => answer !== null).length;
            const totalQuestions = questions.length;
            const progressPercent = (answeredCount / totalQuestions) * 100;
            
            document.getElementById('progressText').textContent = `${answeredCount}/${totalQuestions}`;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
        }
        
        // 计算得分
        function calculateScores() {
            let controlScore = 0;
            let jealousyScore = 0;
            let dependencyScore = 0;
            let insecurityScore = 0;
            
            let controlCount = 0;
            let jealousyCount = 0;
            let dependencyCount = 0;
            let insecurityCount = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] !== null) {
                    const optionScore = question.options[userAnswers[index]].score;
                    
                    switch(question.dimension) {
                        case 'control':
                            controlScore += optionScore;
                            controlCount++;
                            break;
                        case 'jealousy':
                            jealousyScore += optionScore;
                            jealousyCount++;
                            break;
                        case 'dependency':
                            dependencyScore += optionScore;
                            dependencyCount++;
                            break;
                        case 'insecurity':
                            insecurityScore += optionScore;
                            insecurityCount++;
                            break;
                    }
                }
            });
            
            // 计算平均分（百分比）
            const scores = {
                control: controlCount > 0 ? Math.round(controlScore / controlCount) : 0,
                jealousy: jealousyCount > 0 ? Math.round(jealousyScore / jealousyCount) : 0,
                dependency: dependencyCount > 0 ? Math.round(dependencyScore / dependencyCount) : 0,
                insecurity: insecurityCount > 0 ? Math.round(insecurityScore / insecurityCount) : 0
            };
            
            // 计算总体平均分
            const totalScore = Math.round((scores.control + scores.jealousy + scores.dependency + scores.insecurity) / 4);
            
            return { ...scores, total: totalScore };
        }
        
        // 显示结果
        function showResults() {
            // 检查是否所有问题都已回答
            const unanswered = userAnswers.some(answer => answer === null);
            if (unanswered) {
                alert('请回答所有问题后再查看结果');
                return;
            }
            
            // 计算得分
            const scores = calculateScores();
            
            // 更新总体结果
            document.getElementById('overallScore').textContent = `${scores.total}%`;
            
            // 设置总体水平
            const overallLevel = getOverallLevel(scores.total);
            document.getElementById('overallLevel').textContent = overallLevel.text;
            document.getElementById('overallLevel').className = `overall-level ${overallLevel.class}`;
            document.getElementById('overallAnalysis').textContent = overallLevel.analysis;
            
            // 更新各维度分数显示
            document.getElementById('controlScore').textContent = `${scores.control}%`;
            document.getElementById('jealousyScore').textContent = `${scores.jealousy}%`;
            document.getElementById('dependencyScore').textContent = `${scores.dependency}%`;
            document.getElementById('insecurityScore').textContent = `${scores.insecurity}%`;
            
            // 延迟设置进度条宽度，以便动画生效
            setTimeout(() => {
                document.getElementById('controlScoreFill').style.width = `${scores.control}%`;
                document.getElementById('jealousyScoreFill').style.width = `${scores.jealousy}%`;
                document.getElementById('dependencyScoreFill').style.width = `${scores.dependency}%`;
                document.getElementById('insecurityScoreFill').style.width = `${scores.insecurity}%`;
            }, 100);
            
            // 更新分析内容
            updateAnalysis(scores);
            
            // 切换到结果页面
            document.getElementById('testSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'block';
            
            // 保存结果到本地存储
            saveResults(scores);
        }
        
        // 获取总体水平
        function getOverallLevel(score) {
            if (score <= 30) {
                return {
                    text: "低占有欲",
                    class: "low",
                    analysis: "您的总体占有欲处于较低水平，表明您在恋爱关系中能够保持较好的平衡，既能有适度的投入和关心，也能尊重伴侣的个人空间和独立性。这种状态有助于建立健康、平等的关系。"
                };
            } else if (score <= 60) {
                return {
                    text: "中等占有欲",
                    class: "medium",
                    analysis: "您的总体占有欲处于中等水平，表明您在恋爱关系中既有关心和投入，也可能在某些情况下表现出一定的占有倾向。多数情况下您能在个人需求和关系需求之间找到平衡。"
                };
            } else {
                return {
                    text: "高占有欲",
                    class: "high",
                    analysis: "您的总体占有欲处于较高水平，表明您在恋爱关系中可能有较强的占有倾向。这可能导致关系紧张，建议您审视这种倾向是否影响了关系的健康发展，并考虑适当调整。"
                };
            }
        }
        
        // 更新分析内容
        function updateAnalysis(scores) {
            // 控制欲望分析
            const controlLevel = getDimensionLevel(scores.control, 'control');
            document.getElementById('controlLevel').textContent = controlLevel.text;
            document.getElementById('controlLevel').className = `level-indicator ${controlLevel.class}`;
            document.getElementById('controlAnalysis').innerHTML = `
                <p>控制欲望反映了您在恋爱关系中希望掌控伴侣行为、决策和社交活动的倾向。</p>
                <p>${controlLevel.analysis}</p>
                <p>${getDimensionAdvice(scores.control, 'control')}</p>
            `;
            
            // 嫉妒强度分析
            const jealousyLevel = getDimensionLevel(scores.jealousy, 'jealousy');
            document.getElementById('jealousyLevel').textContent = jealousyLevel.text;
            document.getElementById('jealousyLevel').className = `level-indicator ${jealousyLevel.class}`;
            document.getElementById('jealousyAnalysis').innerHTML = `
                <p>嫉妒强度衡量了您对潜在竞争者或伴侣与他人互动的情绪反应程度。</p>
                <p>${jealousyLevel.analysis}</p>
                <p>${getDimensionAdvice(scores.jealousy, 'jealousy')}</p>
            `;
            
            // 情感依赖分析
            const dependencyLevel = getDimensionLevel(scores.dependency, 'dependency');
            document.getElementById('dependencyLevel').textContent = dependencyLevel.text;
            document.getElementById('dependencyLevel').className = `level-indicator ${dependencyLevel.class}`;
            document.getElementById('dependencyAnalysis').innerHTML = `
                <p>情感依赖评估了您在情感上依赖伴侣的程度和自我独立性的水平。</p>
                <p>${dependencyLevel.analysis}</p>
                <p>${getDimensionAdvice(scores.dependency, 'dependency')}</p>
            `;
            
            // 关系不安全感分析
            const insecurityLevel = getDimensionLevel(scores.insecurity, 'insecurity');
            document.getElementById('insecurityLevel').textContent = insecurityLevel.text;
            document.getElementById('insecurityLevel').className = `level-indicator ${insecurityLevel.class}`;
            document.getElementById('insecurityAnalysis').innerHTML = `
                <p>关系不安全感反映了您对关系稳定性和伴侣忠诚度的担忧和不安程度。</p>
                <p>${insecurityLevel.analysis}</p>
                <p>${getDimensionAdvice(scores.insecurity, 'insecurity')}</p>
            `;
        }
        
        // 获取维度水平
        function getDimensionLevel(score, dimension) {
            const dimensionNames = {
                control: "控制欲望",
                jealousy: "嫉妒强度",
                dependency: "情感依赖",
                insecurity: "关系不安全感"
            };
            
            const name = dimensionNames[dimension];
            
            if (score <= 30) {
                return {
                    text: "低水平",
                    class: "low",
                    analysis: `您的${name}得分为${score}%，处于较低水平。这表明您在关系中能够保持较好的平衡和理性。`
                };
            } else if (score <= 60) {
                return {
                    text: "中等水平",
                    class: "medium",
                    analysis: `您的${name}得分为${score}%，处于中等水平。这表明您在该方面有一定的倾向，但通常能够理性控制。`
                };
            } else {
                return {
                    text: "高水平",
                    class: "high",
                    analysis: `您的${name}得分为${score}%，处于较高水平。这表明您在该方面有较强的倾向，可能需要关注其对关系的影响。`
                };
            }
        }
        
        // 获取维度建议
        function getDimensionAdvice(score, dimension) {
            if (score <= 30) {
                switch(dimension) {
                    case 'control': return "继续保持对伴侣的尊重和信任，同时也要确保您自己的需求得到表达和满足。";
                    case 'jealousy': return "您对伴侣的信任度很高，这是健康关系的重要基础，继续保持这种信任。";
                    case 'dependency': return "您保持了良好的独立性，这有助于建立成熟、平衡的伴侣关系，继续保持。";
                    case 'insecurity': return "您对关系有较强的安全感，这有助于建立长期稳定的伴侣关系，继续保持。";
                }
            } else if (score <= 60) {
                switch(dimension) {
                    case 'control': return "尝试在表达关心和控制行为之间找到平衡，明确区分哪些是合理的关注，哪些可能过度。";
                    case 'jealousy': return "当感到嫉妒时，尝试与伴侣坦诚沟通您的感受，而不是让情绪积累或转化为指责。";
                    case 'dependency': return "注意保持个人生活和关系的平衡，确保您的幸福不完全依赖于恋爱关系。";
                    case 'insecurity': return "当感到不安时，尝试与伴侣分享感受，同时也要建立自我安抚的能力。";
                }
            } else {
                switch(dimension) {
                    case 'control': return "考虑是否您的控制行为源于自身的不安全感，尝试建立更多信任，给予伴侣更多自主空间。";
                    case 'jealousy': return "强烈的嫉妒可能损害关系，尝试探索嫉妒情绪的根源，建立更稳固的自我价值感和关系安全感。";
                    case 'dependency': return "过度的情感依赖可能给伴侣带来压力，也影响您的自我成长。尝试培养更多个人兴趣和社交圈。";
                    case 'insecurity': return "过度的不安全感可能源于过去的经历或自我价值问题，考虑通过自我成长或专业帮助来建立更稳固的安全感。";
                }
            }
        }
        
        // 保存结果到本地存储
        function saveResults(scores) {
            const resultData = {
                scores: scores,
                timestamp: new Date().toISOString(),
                answers: userAnswers
            };
            localStorage.setItem('possessionTestResults', JSON.stringify(resultData));
        }
        
        // 从本地存储加载结果
        function loadResults() {
            const savedResults = localStorage.getItem('possessionTestResults');
            if (savedResults) {
                return JSON.parse(savedResults);
            }
            return null;
        }
        
        // 重置测评
        function resetTest() {
            userAnswers = new Array(questions.length).fill(null);
            initTest();
            document.getElementById('testSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
        }
        
        // 返回测试页面
        function backToTest() {
            document.getElementById('testSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
        }
        
        // 事件监听器
        document.getElementById('submitBtn').addEventListener('click', showResults);
        document.getElementById('resetBtn').addEventListener('click', resetTest);
        document.getElementById('retakeTestBtn').addEventListener('click', resetTest);
        document.getElementById('viewTestBtn').addEventListener('click', backToTest);
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 检查是否有保存的结果
            const savedResults = loadResults();
            if (savedResults && window.location.hash === '#results') {
                // 恢复答案
                userAnswers = savedResults.answers;
                
                // 显示结果
                const scores = savedResults.scores;
                
                // 更新总体结果
                document.getElementById('overallScore').textContent = `${scores.total}%`;
                const overallLevel = getOverallLevel(scores.total);
                document.getElementById('overallLevel').textContent = overallLevel.text;
                document.getElementById('overallLevel').className = `overall-level ${overallLevel.class}`;
                document.getElementById('overallAnalysis').textContent = overallLevel.analysis;
                
                // 更新各维度分数显示
                document.getElementById('controlScore').textContent = `${scores.control}%`;
                document.getElementById('jealousyScore').textContent = `${scores.jealousy}%`;
                document.getElementById('dependencyScore').textContent = `${scores.dependency}%`;
                document.getElementById('insecurityScore').textContent = `${scores.insecurity}%`;
                
                // 设置进度条宽度
                setTimeout(() => {
                    document.getElementById('controlScoreFill').style.width = `${scores.control}%`;
                    document.getElementById('jealousyScoreFill').style.width = `${scores.jealousy}%`;
                    document.getElementById('dependencyScoreFill').style.width = `${scores.dependency}%`;
                    document.getElementById('insecurityScoreFill').style.width = `${scores.insecurity}%`;
                }, 100);
                
                // 更新分析
                updateAnalysis(scores);
                
                // 显示结果页面
                document.getElementById('testSection').style.display = 'none';
                document.getElementById('resultsSection').style.display = 'block';
                
                // 恢复选项选择状态
                initTest();
                userAnswers.forEach((answerIndex, questionIndex) => {
                    if (answerIndex !== null) {
                        const optionElement = document.querySelector(`.option[data-question="${questionIndex}"][data-option="${answerIndex}"]`);
                        if (optionElement) {
                            optionElement.classList.add('selected');
                        }
                    }
                });
                updateProgress();
            } else {
                // 初始化新测试
                initTest();
            }
        });
    </script>
</body>
</html>
